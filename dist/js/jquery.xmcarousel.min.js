!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var n={init:function(n,t){var i=this;i.options=n=e.extend({},e.fn.xmCarousel.defaultOptions,n),i.$elem=e(t),i.currentIndex="fade"==n.type?n.index:n.index+1,i.nextIndex=i.currentIndex+1,i.isRunning=!1;var s=e("<ul/>"),d=e("<div>&lt;</div>").addClass("prev"),r=e("<div>&gt;</div>").addClass("next"),h=e("<div/>").addClass("page_bg"),o=e("<div/>").addClass("page");if(i.$ul=s,i.$prev=d,i.$next=r,i.$page=o,e(t).addClass("xmCarousel").css({width:n.width,height:n.height}),s.html(e.map(n.imgs,function(e,n){return"<li><a href='"+(e.href||"#")+"' target='_blank'><img src='"+e.imgSrc+"'></a></li>"}).join("")),e(t).append(s),s.css({width:n.width,height:n.height}).find("img").css("border","none"),/^fade$|^slide$/.test(n.type)||(n.type="fade"),"fade"===n.type)s.children().css({position:"absolute",top:0,left:0,width:n.width,height:n.height}).eq(i.currentIndex).show().siblings().hide();else if("slide"===n.type){var l=s.children(":first").clone(!0),a=s.children(":last").clone(!0);s.append(l).prepend(a),s.css({width:(n.imgs.length+2)*n.width,left:-n.width*i.currentIndex}).children().css({width:n.width,height:n.height,float:"left"})}e(t).append(h),o.html(e.map(n.imgs,function(e,n){return"<div class='"+(n==i.options.index?"current":"")+"'></div>"}).join("")),e(t).append(o),n.btnPrevNext&&e(t).append(d).append(r);var u=null;e(t).hover(function(){clearInterval(u),d.show(),r.show()},function(){d.hide(),r.hide(),n.autoPlay&&(u=setInterval(i.move(i),n.duration))}).trigger("mouseleave"),o.on("mouseenter","div",function(){i.nextIndex="fade"===i.options.type?e(this).index():e(this).index()+1,i.move(i)()}),n.btnPrevNext&&(e(".prev").click(function(){i.isRunning||(i.nextIndex=i.currentIndex-1,"fade"===i.options.type&&i.nextIndex<0&&(i.nextIndex=i.options.imgs.length-1),i.move(i)())}),e(".next").click(function(){i.isRunning||i.move(i)()})),e(t).on("selectstart",function(){return!1})},fade:function(){this.$ul.children().eq(this.currentIndex).stop().fadeOut(),this.$ul.children().eq(this.nextIndex).stop().fadeIn(),this.$page.children().eq(this.nextIndex).addClass("current").siblings().removeClass("current"),this.currentIndex=this.nextIndex,++this.nextIndex>=this.options.imgs.length&&(this.nextIndex=0),this.isRunning=!1},slide:function(){var e=this,n=-this.options.width*this.nextIndex,t=this.nextIndex-1;this.nextIndex>=this.options.imgs.length+1?t=0:this.currentIndex<=0&&(t=this.options.imgs.length-1),this.$page.children().eq(t).addClass("current").siblings().removeClass("current"),this.currentIndex=this.nextIndex,this.nextIndex++,this.$ul.stop().animate({left:n},function(){e.nextIndex>=e.$ul.children().length?(e.$ul.css("left",-e.options.width),e.currentIndex=1,e.nextIndex=2):e.currentIndex<=0&&(e.$ul.css("left",-e.options.width*e.options.imgs.length),e.currentIndex=e.options.imgs.length,e.nextIndex=e.options.imgs.length+1),e.isRunning=!1})},move:function(e){return function(){e.isRunning=!0,"fade"===e.options.type?e.fade():e.slide()}}};e.fn.xmCarousel=function(e){return this.each(function(){Object.create(n).init(e,this)}),this},e.fn.xmCarousel.defaultOptions={width:790,height:340,index:0,autoPlay:!0,type:"slide",duration:5e3,btnPrevNext:!0,imgs:[]}});